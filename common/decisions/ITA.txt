###DEBUG STUFF

debug_decisions = {
	DEBUG_activate_missiolinis_system = {
		priority = 999
		allowed = {
			tag = ITA
		}

		visible = {
			NOT = { has_country_flag = ITA_missiolinis_system_active_flag }
			is_debug = yes
		}

		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
		}

		complete_effect = {
			ITA_missiolinis_initialize_missiolinis_system = yes
			log = "Will mess the sync between between the initial missions to Conquer/Hold Ethiopia for ETH and ITA"
			ITA_benito_mussolini = { unit_leader_event = BBA_italo_ethiopian_war_events.01 } #This event initializes the system
		}
	}

	DEBUG_deactivate_missiolinis_system = {
		priority = 999
		allowed = {
			tag = ITA
		}

		visible = {
			has_country_flag = ITA_missiolinis_system_active_flag
			is_debug = yes
		}

		complete_effect = {
			clr_country_flag = ITA_missiolinis_system_active_flag
			log = "Deactivates Missiolinis system"
		}
	}

	DEBUG_manu_tests = {
		priority = 100
		allowed = {
			OR = {
				original_tag = ITA
				tag = RSI
				tag = RDS
			}
		}

		visible = {
			is_debug = yes
		}

		available = {
			has_country_flag = ITA_defeat_in_ethiopia_flag 
			has_country_flag = ITA_victory_in_ethiopia_flag
		}

		complete_effect = {
			ITA_set_up_character_cw_flags_effect = yes
			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission

			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission

			#ITA_create_francesco_de_martini_operative = yes
			#ITA_create_paolo_caccia_dominioni_operative = yes
			#ITA_create_rosa_dainelli_operative = yes
			#ITA_create_padre_ildefonso_operative = yes
			#ITA_create_pietro_koch_operative = yes
			#ITA_create_carmelo_borg_pisani_operative = yes
			#ITA_create_maurizio_giglio_operative = yes
			#ITA_create_emilio_faldella_operative = yes
			#ITA_create_edgardo_sogno_operative = yes
			#ITA_create_laura_garroni_operative = yes
			#ITA_create_stefanina_moro_operative = yes
			#ITA_create_hugh_o_flaherty_operative = yes

			#ITA_benito_mussolini = { unit_leader_event = BBA_italy_missiolinis.61 }

			#set_variable = { trucks_stored = num_equipment@motorized_equipment_1 }
			#log = "TRUCKS: [?trucks_stored]"

			#activate_mission = ITA_conquer_the_north_mission
			#activate_mission = ITA_conquer_the_south_mission
		}
	}

	DEBUG_initiate_BOP = {
		priority = 100

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_any_power_balance = no
			is_debug = yes
		}

		complete_effect = {
			ITA_initiate_balance_of_power_effect = yes
		}
	}
}


##     ## ####  ######   ######  ####  #######  ##       #### ##    ## ####  ######
###   ###  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ###   ##  ##  ##    ##
#### ####  ##  ##       ##        ##  ##     ## ##        ##  ####  ##  ##  ##
## ### ##  ##   ######   ######   ##  ##     ## ##        ##  ## ## ##  ##   ######
##     ##  ##        ##       ##  ##  ##     ## ##        ##  ##  ####  ##        ##
##     ##  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ##   ###  ##  ##    ##
##     ## ####  ######   ######  ####  #######  ######## #### ##    ## ####  ######


### MISSIOLINIS
ITA_missiolinis = {
	# Strengthen Heavy Industry
	ITA_missiolini_strengthen_heavy_industry = {
		icon = GFX_decision_generic_merge_plant_materiel
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = { #TODO_Manu: This should be replaced by the appropriate check once Red king merges stuff (Factories BUILD check)
				tooltip = ITA_missiolini_strengthen_heavy_industry_trigger_tt
				num_of_civilian_factories > ROOT.ITA_missiolinis_required_civs
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.32 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.33 hours = 1 }
			}
		}
	}

	# Strengthen the Army
	ITA_missiolini_strengthen_the_army = {
		icon = GFX_decision_generic_military
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#has_army_manpower = { size > ROOT.ITA_missiolinis_fielded_manpower_goal } #1kk #TODO_Manu: Code support to use vars in has_army_manpower
			#if = { #FIRST TIME - FIXED AMOUNT #TODO_Manu: NEED CODE SUPPORT (see line above)
			#	limit = {
			#		NOT = { has_country_flag = ITA_missiolini_strengthen_the_army_repeatable_flag } #First time it's a fixed amopunt. Then if the mission is repeated it will require +500k MP in the field (compare to current)
			#	}
				if = {
					limit = {
						ITA_has_missiolini_easier_goals = yes
					}
					has_army_manpower = { size > 650000 } #650k
				}
				else = {
					has_army_manpower = { size > 750000 } #750k
				}
			#}
			#else = { #IF REPEATING
			#	has_army_manpower = { size > 1000000 } #TODO_Manu: Current MP + 500 -> Code Support for this (has_army_manpower does not take vars)
			#}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.42 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.43 hours = 1 }
			}
		}
	}

	# Stockpile Trucks
	ITA_missiolini_stockpile_trucks = {
		icon = GFX_decision_generic_trucks
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_equipment = { #TODO_Manu: Code Support to also get the trucks in the field // Alternatively, check for trucks produced (Code support too!)
				motorized_equipment_1 > ROOT.ITA_missiolinis_trucks_to_produce
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.52 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.53 hours = 1 }
			}
		}
	}

	# Stockpile fuel
	ITA_missiolini_stockpile_fuel = {
		icon = GFX_decision_oil
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_fuel > 500000
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.62 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.63 hours = 1 }
			}
		}
	}

	# Strengthen the Airforce
	ITA_missiolini_strengthen_the_airforce = {
		icon = GFX_decision_generic_merge_plant_aircraft
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#Fighters
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_fighters_goal_tt
				#Fighters
				set_temp_variable = { current_fighters = num_equipment@small_plane_airframe }
				add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@small_plane_airframe }
				##CV Fighters
				#add_to_temp_variable = { current_fighters = num_equipment@cv_small_plane_airframe }
				#add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@cv_small_plane_airframe }
				
				

				check_variable = { current_fighters = ITA_missiolinis_fighters_goal compare = greater_than_or_equals }
			}
			#Bombers
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_bombers_goal_tt
				#CAS
				set_temp_variable = { current_cas = num_equipment@small_plane_cas_airframe }
				add_to_temp_variable = { current_cas = num_deployed_planes_with_type@small_plane_cas_airframe }
				#CV CAS
				#add_to_temp_variable = { current_cas = num_equipment@cv_small_plane_cas_airframe }
				#add_to_temp_variable = { current_cas = num_deployed_planes_with_type@cv_small_plane_cas_airframe }
				#Naval Bombers
				set_temp_variable = { current_naval_bombers = num_equipment@small_plane_naval_bomber_airframe }
				add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@small_plane_naval_bomber_airframe }
				#CV Naval Bombers
				#add_to_temp_variable = { current_naval_bombers = num_equipment@cv_small_plane_naval_bomber_airframe }
				#add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@cv_small_plane_naval_bomber_airframe }

				#Tactical Bombers
				set_temp_variable = { current_tactical_bombers = num_equipment@medium_plane_airframe }
				add_to_temp_variable = { current_tactical_bombers = num_deployed_planes_with_type@medium_plane_airframe }
				OR = {
					#CAS
					check_variable = { current_cas = ITA_missiolinis_cas_goal compare = greater_than_or_equals }
					#Naval Bombers
					check_variable = { current_naval_bombers = ITA_missiolinis_naval_bombers_goal compare = greater_than_or_equals }
					#Tactical Bombers
					check_variable = { current_tactical_bombers = ITA_missiolinis_tactical_bombers_goal compare = greater_than_or_equals }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.72 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.73 hours = 1 }
			}
		}
	}

	# Industrial Research
	ITA_missiolini_industrial_research = {
		icon = GFX_decision_generic_wreckers
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN TECH GOAL
			if = { #Production - Advanced Machine Tools
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 1 }
				}
				has_tech = advanced_machine_tools
			}
			else_if = { #Production - Assembly Line Production
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 2 }
				}
				has_tech = assembly_line_production
			}
			else_if = { #Production - Flexible Line / Streamlined Line
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 3 }
				}
				OR = {
					has_tech = flexible_line
					has_tech = streamlined_line
				}
			}
			else_if = { #Industry - Concentrated Industry 3 / Dispersed Industry 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 1 }
				}
				OR = {
					has_tech = concentrated_industry3
					has_tech = dispersed_industry3
				}
			}
			else_if = { #Industry - Concentrated Industry 4 / Dispersed Industry 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 2 }
				}
				OR = {
					has_tech = concentrated_industry4
					has_tech = dispersed_industry4
				}
			}
			else_if = { #Industry - Concentrated Industry 5 / Dispersed Industry 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 3 }
				}
				OR = {
					has_tech = concentrated_industry5
					has_tech = dispersed_industry5
				}
			}
			else_if = { #Construction - Construction 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 1 }
				}
				has_tech = construction3
			}
			else_if = { #Construction - Construction 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 2 }
				}
				has_tech = construction4
			}
			else_if = { #Construction - Construction 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 3 }
				}
				has_tech = construction5
			}
			else = { #Absurd fallback just in case
				has_tech = nukes
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_industrial_research_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.82 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_industrial_research_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.83 hours = 1 }
			}
		}
	}

	# Expand Intelligence Agency
	ITA_missiolini_expand_intelligence_agency = {
		icon = GFX_decision_onmap_recruit_operative
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN INTEL AGENCY GOAL
			if = { #Create Intel Agency
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 1 }
				}
				has_intelligence_agency = yes
			}
			else_if = { #Upgrade - Form Cryptology Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 2 }
				}
				has_done_agency_upgrade = upgrade_form_department
			}
			else_if = { #Production - Form Army Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 3 }
				}
				has_done_agency_upgrade = upgrade_army_department
			}
			else_if = { #Production - Anti-Partisan
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 4 }
				}
				has_done_agency_upgrade = upgrade_anti_partisan
			}
			else_if = { #Production - Passive Defense
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 5 }
				}
				has_done_agency_upgrade = upgrade_passive_defense
			}
			else = { #Absurd fallback just in case
				agency_upgrade_number > 30 #31 is max
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.92 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.93 hours = 1 }
			}
		}
	}

	# Occupy Albania
	ITA_missiolini_occupy_albania = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			44 = { #ALBANIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			805 = { #NORTHERN EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			934 = { #SHKÖDER
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = ALB
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.102 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.103 hours = 1 }
			}
		}
	}

	# Occupy Dalmatia
	ITA_missiolini_occupy_dalmatia = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			103 = { #DALMATIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = YUG
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.112 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.113 hours = 1 }
			}
		}
	}

	# Occupy Greece
	ITA_missiolini_occupy_greece = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			185 = { #EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			47 = { #ATTICA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			186 = { #PELOPONNESE
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = GRE
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.122 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.123 hours = 1 }
			}
		}
	}

	# Occupy Ticino
	ITA_missiolini_occupy_ticino = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			846 = { #TICINO
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = SWI
		cosmetic_ideology = democratic

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.132 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.133 hours = 1 }
			}
		}
	}






	# Bolster Political Cabinet
	ITA_missiolini_bolster_political_cabinet = {
		icon = GFX_decision_generic_political_discourse
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_political_cabinet_trigger_tt
				amount_taken_ideas = {
					amount > 2
					slots = { political_advisor }
				}
				OR = {
					has_idea = ITA_gian_galeazzo_ciano
					has_idea = ITA_dino_grandi
					has_idea = ITA_giuseppe_bottai
					has_idea = ITA_renato_ricci
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.202 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.203 hours = 1 }
			}
		}
	}

	# Bolster Military High Command
	ITA_missiolini_bolster_military_high_command = {
		icon = GFX_decision_generic_army_support
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_military_high_command_trigger_tt
				amount_taken_ideas = {
					amount > 2
					#category = { military_staff }
					slots = { high_command }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.212 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.213 hours = 1 }
			}
		}
	}
}

ITA_naval_cooperation_programs_dec_cat = {
	ITA_cooperation_program_with_country = {
		priority = 20

		icon = GFX_decision_generic_research

		ai_will_do = {
			base = 0.7
		}

		fire_only_once = yes

		available = {
			has_navy_size = {
				size > 4
				archetype = ship_hull_light #DDs
			}
			has_navy_size = {
				size > 0
				type = capital_ship
			}
			FROM = { #For tooltip purposes
				has_navy_size = {
					size > 4
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_array = ROOT.allies

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			is_in_faction = yes
		}

		cost = 15

		complete_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.01 hours = 1 } }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
				FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
			}
		}
	}

	ITA_joint_maneuvers_with_country = {
		priority = 18

		icon = GFX_decision_hol_draw_up_staff_plans

		ai_will_do = {
			base = 1
		}

		fire_only_once = yes

		available = {
			has_navy_size = {
				size > 14
				archetype = ship_hull_light #DDs
			}
			has_navy_size = {
				size > 2
				type = capital_ship
			}
			FROM = { #For tooltip purposes
				has_navy_size = {
					size > 9#14
					archetype = ship_hull_light #DDs
				}
			}
			FROM = {
				has_navy_size = {
					size > 2
					type = capital_ship
				}
			}
		}

		target_array = ROOT.allies

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
				NOT = { has_country_flag = ITA_joint_maneuvers_flag }
				NOT = { has_country_flag = ITA_joint_maneuvers_rejected_flag }
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			is_in_faction = yes
		}

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			has_political_power > 14
			has_navy_experience > 14
		}
		custom_cost_text = decision_cost_pp_15_NavXP_15

		days_remove = ITA_joint_maneuvers_with_country_days

		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { country_exists = ROOT }
					NOT = { country_exists = FROM }
					NOT = { is_in_faction_with = FROM }
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				add_political_power = -15
				navy_experience = -15
			}
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.04 hours = 1 } }
		}

		remove_effect = {
			FROM = { set_country_flag = ITA_joint_maneuvers_flag } #To prevent the decision to be taken more than once for the same tag

			hidden_effect = {
				country_event = BBA_italy_naval_cooperation_programs.07
				FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.07 hours = 1 } }
			}
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.50
					uses = 1
					category = naval_doctrine
				}
				FROM = {
					navy_experience = 50
					add_doctrine_cost_reduction = {
						name = ITA_joint_maneuvers_with_country_doctrine_bonus
						cost_reduction = 0.50
						uses = 1
						category = naval_doctrine
					}
				}
			}
		}
	}

	ITA_sell_obsolete_escort_ships_to_country = {
		priority = 15

		icon = GFX_decision_generic_naval

		ai_will_do = {
			base = 1
		}

		available = {
			FROM = {
				OR = {
					is_in_faction_with = ROOT
					is_in_faction = no
				}
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
			NOT = { has_country_flag = ITA_escort_ships_purchase_ongoing_flag } #Prevents ITA from activating more than one of these decisions at once
		}

		visible = {
			NOT = { has_country_flag = ITA_sold_obsolete_escort_ships_flag } #Can only sell the ships once // Need this inside visible in order to hide the other decisions immediately after successfully selling ships
		}

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				is_major = no
				NOT = { has_country_flag = ITA_obsolete_escort_ships_rejected_flag }
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = ITA_purchase_obsolete_escort_ships_rejected_flag }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_country_flag = ITA_sweden_refused_to_buy_ships_flag #Available only if Sweden refuses in the event triggered via FT
			NOT = { has_country_flag = ITA_sold_obsolete_escort_ships_flag } #Can only sell the ships once
		}

		cost = 15

		complete_effect = {
			set_country_flag = ITA_escort_ships_purchase_ongoing_flag
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.08 hours = 1 } }
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
				add_timed_idea = {
					idea = ITA_sold_obsolete_escort_ships_ns
					days = 365
				}
			}

			custom_effect_tooltip = ITA_sell_obsolete_escort_ships_to_country_only_once_tt
		}
	}

	ITA_cede_aquila_class_destroyers_to_spanish_tag = {
		priority = 15

		icon = GFX_decision_generic_naval

		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				is_historical_focus_on = yes
			}
		}

		visible = {
			NOT = { has_country_flag = ITA_ceded_aquila_class_destroyers_flag } #Used inside visible trigger to check continuously and prevent exploits
		}

		available = {
			has_navy_size = {
				size > 0
				archetype = ship_hull_light #DDs
			}
			FROM = {
				OR = {
					is_in_faction_with = ROOT
					is_in_faction = no
				}
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				NOT = { has_war_with = ROOT }
				has_navy_size = {
					size > 0
					archetype = ship_hull_light #DDs
				}
			}
		}

		fire_only_once = yes

		targets = { SPA SPB SPC SPD }

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				original_tag = SPR
				ITA_is_compatible_spanish_tag = yes
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_completed_focus = ITA_corpo_di_truppe_volontarie #It's totally ok that the decision gets unlocked even if the focus gets bypassed
			NOT = { has_country_flag = ITA_ceded_aquila_class_destroyers_flag } #To prevent visible trigger to check every tick after this happens
			OR = {
				has_global_flag = spanish_civil_war
				has_global_flag = scw_over
			}
		}

		complete_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.11 hours = 1 } }
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				navy_experience = 50
				add_political_power = 50
				custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
				FROM = {
					add_opinion_modifier = {
						modifier = ITA_ceded_destroyers
						target = ROOT
					}
				}
			}
		}
	}

	ITA_export_midget_submarines = {
		priority = 15

		icon = GFX_decision_generic_construction

		ai_will_do = {
			base = 0.5
			modifier = {
				factor = 100
				FROM = {
					is_ai = no
				}
			}
		}

		allowed = {
			has_dlc = "Man the Guns"
		}

		visible = {
			NOT = { FROM = { has_country_flag = ITA_midget_submarines_flag } } #Used inside visible trigger to check continuously and prevent exploits
		}

		available = {
			FROM = {
				is_in_faction_with = ROOT
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
				has_navy_size = {
					size > 0
					archetype = ship_hull_submarine #SS
				}
			}
			NOT = { has_country_flag = ITA_producing_midget_submarines_for_export_flag }
		}

		target_trigger = { #Used to filter out allies with no navy. The actual trigger is part of the available trigger since we want the player to be aware of the requisites for FROM
			FROM = {
				is_in_faction_with = ROOT
				is_major = no
				capital_scope = {
					is_on_continent = europe
				}
			}
		}

		target_root_trigger = {
			original_tag = ITA
			has_civil_war = no
			has_completed_focus = ITA_cooperation_programs
			has_completed_focus = ITA_midget_submarines
			NOT = { FROM = { has_country_flag = ITA_midget_submarines_flag } } #To prevent visible trigger to check every tick after this happens
		}

		cancel_trigger = {
			OR = {
				NOT = { is_in_faction_with = FROM }
				NOT = { country_exists = FROM }
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_producing_midget_submarines_for_export_flag
		}

		days_remove = ITA_export_midget_submarines_days

		modifier = {
			consumer_goods_factor = -0.05
			industrial_capacity_dockyard = -0.05
		}

		complete_effect = {
			set_country_flag = ITA_producing_midget_submarines_for_export_flag
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.14 hours = 1 } }
			custom_effect_tooltip = if_they_accept
			effect_tooltip = {
				custom_effect_tooltip = ITA_export_midget_submarines_tt
				FROM = {
					add_opinion_modifier = {
						modifier = POR_sold_ships
						target = ROOT
					}
				}
			}
		}

		remove_effect = {
			clr_country_flag = ITA_producing_midget_submarines_for_export_flag
			FROM = { country_event = BBA_italy_naval_cooperation_programs.17 }
		}
	}
}

##     ##    ###    ##       ##        #######        ###    ##       ########  #### ##    ##  #######
##     ##   ## ##   ##       ##       ##     ##      ## ##   ##       ##     ##  ##  ###   ## ##     ##
##     ##  ##   ##  ##       ##       ##     ##     ##   ##  ##       ##     ##  ##  ####  ## ##     ##
##     ## ##     ## ##       ##       ##     ##    ##     ## ##       ########   ##  ## ## ## ##     ##
 ##   ##  ######### ##       ##       ##     ##    ######### ##       ##         ##  ##  #### ##     ##
  ## ##   ##     ## ##       ##       ##     ##    ##     ## ##       ##         ##  ##   ### ##     ##
   ###    ##     ## ######## ########  #######     ##     ## ######## ##        #### ##    ##  #######


ITA_vallo_alpino_del_littorio_dec_cat = {
	ITA_vallo_alpino_occidentale = {
		priority = 10

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		visible = {
			158 = { #PIEDMONT
				any_province_building_level = {
					province = {
						id = 11891
						id = 11721
						id = 9738
						id = 6780
						id = 611
					}
					building = bunker
					level < 10
				}
			}
		}

		available = {
			has_full_control_of_state = 158 #PIEDMONT
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			NOT = { has_full_control_of_state = 158 }
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_occidentale_tt
			hidden_effect = {
				158 = { #PIEDMONT
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11891
							id = 11721
							id = 9738
							id = 6780
							id = 611
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_settentrionale_west = {
		priority = 8

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		visible = {
			OR = {
				158 = { #PIEDMONT
					any_province_building_level = {
						province = {
							id = 6635
						}
						building = bunker
						level < 10
					}
				}
				159 = { #LOMBARDY
					any_province_building_level = {
						province = {
							id = 607
							id = 9584
							id = 6661
							id = 11568
						}
						building = bunker
						level < 10
					}
				}
			}
		}

		available = {
			has_full_control_of_state = 158 #PIEDMONT
			has_full_control_of_state = 159 #LOMBARDY
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 158 } #PIEDMONT
				NOT = { has_full_control_of_state = 159 } #LOMBARDY
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_settentrionale_west_tt
			hidden_effect = {
				158 = { #PIEDMONT
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6635
						}
						instant_build = yes
					}
				}
				159 = { #LOMBARDY
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 607
							id = 9584
							id = 6661
							id = 11568
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_settentrionale_east = {
		priority = 6

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		visible = {
			OR = {
				850 = { #TRENTINO
					any_province_building_level = {
						province = {
							id = 6631
							id = 9598
						}
						building = bunker
						level < 10
					}
				}
				39 = { #ALTO ADIGE
					any_province_building_level = {
						province = {
							id = 11598
							id = 656
							id = 11615
						}
						building = bunker
						level < 10
					}
				}
			}
		}

		available = {
			has_full_control_of_state = 850 #TRENTINO
			has_full_control_of_state = 39 #ALTO ADIGE
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > ITA_vallo_alpino_cp_cost
			has_political_power > ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 850 } #TRENTINO
				NOT = { has_full_control_of_state = 39 } #ALTO ADIGE
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_settentrionale_east_tt
			hidden_effect = {
				850 = { #TRENTINO
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 6631
							id = 9598
						}
						instant_build = yes
					}
				}
				39 = { #ALTO ADIGE
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11598
							id = 656
							id = 11615
						}
						instant_build = yes
					}
				}
			}
		}
	}

	ITA_vallo_alpino_orientale = {
		priority = 4

		icon = GFX_decision_generic_mountain_fortification

		ai_will_do = {
			base = 1
		}

		visible = {
			OR = {
				160 = { #VENETO
					any_province_building_level = {
						province = {
							id = 3657
							id = 9613
						}
						building = bunker
						level < 10
					}
				}
				736 = { #LITORALE
					any_province_building_level = {
						province = {
							id = 11595
							id = 599
						}
						building = bunker
						level < 10
					}
				}
				852 = { #ISTRIA
					any_province_building_level = {
						province = {
							id = 11735
							id = 11564
						}
						building = bunker
						level < 10
					}
				}
			}
		}

		available = {
			has_full_control_of_state = 160 #VENETO
			has_full_control_of_state = 736 #LITORALE
			has_full_control_of_state = 852 #ISTRIA
			NOT = { has_country_flag = ITA_vallo_alpino_project_ongoing_flag }
		}

		days_remove = ITA_vallo_alpino_days

		ai_hint_pp_cost = 15
		custom_cost_trigger = {
			command_power > 24#ITA_vallo_alpino_cp_cost
			has_political_power > 14 #ITA_vallo_alpino_pp_cost
		}
		custom_cost_text = decision_cost_CP_25_pp_15

		modifier = {
			civilian_factory_use = 3
		}

		cancel_trigger = {
			OR = {
				NOT = { has_full_control_of_state = 160 } #TRENTINO
				NOT = { has_full_control_of_state = 736 } #ALTO ADIGE
				NOT = { has_full_control_of_state = 852 } #ISTRIA
			}
		}

		cancel_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag
		}

		complete_effect = {
			set_country_flag = ITA_vallo_alpino_project_ongoing_flag

			hidden_effect = {
				add_command_power = ITA_vallo_alpino_cp_cost_negative
				add_political_power = ITA_vallo_alpino_pp_cost_negative
			}
		}

		remove_effect = {
			clr_country_flag = ITA_vallo_alpino_project_ongoing_flag

			custom_effect_tooltip = ITA_vallo_alpino_orientale_tt
			hidden_effect = {
				160 = { #VENETO
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 3657
							id = 9613
						}
						instant_build = yes
					}
				}
				736 = { #LITORALE
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11595
							id = 599
						}
						instant_build = yes
					}
				}
				852 = { #ISTRIA
					add_building_construction = {
						type = bunker
						level = 2
						province = {
							id = 11735
							id = 11564
						}
						instant_build = yes
					}
				}
			}
		}
	}
}

political_actions = {
	ITA_vittorio_abdicate = {
		priority = 10

		icon = GFX_decision_generic_monarchy

		ai_will_do = {
			base = 0
		}

		allowed = {
			original_tag = ITA
		}

		visible = {
			has_completed_focus = ITA_power_to_the_king
			has_country_leader = {
				character = ITA_vittorio_emanuele_iii
				ruling_only = yes
			}
		}

		available = {
			has_country_leader = {
				character = ITA_vittorio_emanuele_iii
				ruling_only = yes
			}
		}

		complete_effect = {
			ITA_promote_umberto_to_country_leader = yes #This effect also retires Vittorio
		}
	}
}