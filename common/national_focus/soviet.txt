### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
### search_filters = {FOCUS_FILTER_PROPAGANDA}
### search_filters = {FOCUS_FILTER_ARMY_XP}
### search_filters = {FOCUS_FILTER_NAVY_XP}
### search_filters = {FOCUS_FILTER_AIR_XP}
# Reminder that focus filters prio has to be handled in the generic focus file :)

focus_tree = {
	id = soviet_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SOV
		}
	}
	
	default = no

	continuous_focus_position = { x = 55 y = 1500 } 

	focus = {
		id = SOV_finish_the_five_year_plan

		icon = GFX_focus_generic_industry_1
		prerequisite = { focus = SOV_infrastructure_effort_nsb }
		prerequisite = { focus = SOV_heavy_industry }
		x = 1
		y = 1
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 10

		available = {
			date > 1936.12.1
		}
		
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = { 
			every_core_state = {
				limit = {
					OR = {
						state = 220
						state = 240
					}
				}
				random_select_amount = 2
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_third_five_year_plan

		icon = GFX_focus_generic_industry_2
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {	
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_production_factory_efficiency_gain_factor = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			add_to_variable = { 
			    SOV_fyp_consumer_goods_factor = 0.05
				tooltip = consumer_goods_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
				name = SOV_third_five_year_plan_default
				bonus = 0.75
				uses = 2
				technology = construction4
				technology = excavation4
			}
		}
	}

	focus = {
		id = SOV_reorganize_the_pc_of_heavy_industry

		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_third_five_year_plan }
		x = -2
		y = 2
		relative_position_id = SOV_third_five_year_plan
		cost = 10

		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_consumer_goods_factor = -0.05
				tooltip = consumer_goods_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt

			add_tech_bonus = {
				name = SOV_reorganize_the_pc_of_heavy_industry_name_default
				bonus = 1.0
				uses = 1
				technology = concentrated_industry4
			}
			add_tech_bonus = {
				name = SOV_reorganize_the_pc_of_heavy_industry_name_default
				bonus = 1.0
				uses = 1
				technology = flexible_line
				technology = streamlined_line
			}
		}
	}

	focus = {
		id = SOV_industrial_modernization

		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry }
		x = 0
		y = 2
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {		
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_production_factory_max_efficiency_factor = 0.05
				tooltip = production_factory_max_efficiency_factor_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_line_change_production_efficiency_factor = 0.1
				tooltip = line_change_production_efficiency_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			add_tech_bonus = {
				name = SOV_industrial_modernization
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				technology = concentrated_industry5
			}
		}
	}

	focus = {
		id = SOV_increase_state_reserves

		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_third_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_third_five_year_plan
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_local_resources_factor = 0.1
				tooltip = local_resources_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_steel_casting_industry

		icon = GFX_focus_generic_steel
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry focus = SOV_synthetic_rubber }
		x = 2
		y = 1
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_industrial_capacity_factory = 0.05
				tooltip = industrial_capacity_factory_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_industrial_capacity_dockyard = 0.05
				tooltip = industrial_capacity_dockyard_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			every_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				random_select_amount = 2
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = steel
					amount = 5
				}
			}
		}
	}

	focus = {
		id = SOV_synthetic_rubber

		icon = GFX_focus_generic_rubber
		prerequisite = { focus = SOV_third_five_year_plan }
		relative_position_id = SOV_third_five_year_plan
		x = 2
		y = 2
		cost = 5
		available = { has_completed_focus = SOV_desperate_measures }
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {	
			modify_building_resources = {
				building = synthetic_refinery
				resource = rubber
				amount = 3
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
			    bonus = 1
			    uses = 4
				technology = rubber_processing
				technology = improved_rubber_processing
				technology = advanced_rubber_processing
				technology = modern_rubber_processing
			}
		}
	}

	focus = {
		id = SOV_oil_production

		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = SOV_synthetic_rubber }
		x = 0
		y = 2
		cost = 5
		relative_position_id = SOV_synthetic_rubber

		available = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_fuel_gain_factor_from_states = 0.5
				tooltip = fuel_gain_factor_from_states_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
				name = SOV_oil_production
				bonus = 1
				uses = 4
				technology = oil_processing
				technology = improved_oil_processing
				technology = advanced_oil_processing
				technology = modern_oil_processing
			}
		}
	}

	focus = {
		id = SOV_national_specialists

		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 4
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = stalingrad_tractor_factory
		}
	}

	focus = {
		id = SOV_eastern_development

		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_national_specialists }
		x = -1
		y = 1
		relative_position_id = SOV_national_specialists
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			every_core_state = {
				limit = {
					OR = {
						state = 409
						state = 408
					}
				}
				random_select_amount = 2
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_develop_the_urals

		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_national_specialists }
		x = 2
		y = 0
		relative_position_id = SOV_eastern_development
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			every_core_state = {
				limit = {
					OR = {
						state = 572
						state = 582
					}
				}
				random_select_amount = 2
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_the_ussr_academy_of_sciences

		icon = GFX_focus_research
		prerequisite = { focus = SOV_eastern_development }
		prerequisite = { focus = SOV_develop_the_urals }
		x = 1
		y = 1
		relative_position_id = SOV_eastern_development
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}

   ###    #### ########   ######  ########     ###    ######## ######## 
  ## ##    ##  ##     ## ##    ## ##     ##   ## ##   ##          ##    
 ##   ##   ##  ##     ## ##       ##     ##  ##   ##  ##          ##    
##     ##  ##  ########  ##       ########  ##     ## ######      ##    
#########  ##  ##   ##   ##       ##   ##   ######### ##          ##    
##     ##  ##  ##    ##  ##    ## ##    ##  ##     ## ##          ##    
##     ## #### ##     ##  ######  ##     ## ##     ## ##          ##    



	focus = {
		id = SOV_transpolar_flights

		icon = GFX_goal_generic_air_fighter2
		x = 10
		y = 1
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 5

		ai_will_do = {
			factor = 1
		}
		
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 100
			custom_effect_tooltip = generic_skip_one_line_tt
			add_tech_bonus = {
				name = SOV_transpolar_flights
				bonus = 1.0
				uses = 2
				technology = improved_small_airframe	
				technology = engines_3					
			}		
		}
	}

	focus = {
		id = SOV_expand_the_aircraft_industry

		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_transpolar_flights }
		x = -1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_mio_trait_merge_vef_plant
				bonus = 1
				uses = 1
				technology = centimetric_radar
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			every_core_state = {
				limit = {
					OR = {
						state = 195 state = 219 state = 217
					}
				}
				add_building_construction = {
					type = radar_station
					level = 5
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_modernize_aircraft_facilities

		icon = GFX_goal_generic_air_production
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		x = -1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_range_factor = 0.05
				tooltip = air_range_factor_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_agility_factor = 0.05
				tooltip = air_agility_factor_tt
			}
		}
	}

	focus = {
		id = SOV_merge_aircraft_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_modernize_aircraft_facilities }
		x = -1
		y = 1
		relative_position_id = SOV_modernize_aircraft_facilities
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				every_military_industrial_organization = {
					limit = {
						has_mio_trait = SOV_mio_trait_merge_plant_no_28 #All Aircraft MIOs have this trait
					}
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_28
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_150
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_vef_plant
				}
			}
			else = {
				custom_effect_tooltip = SOV_merge_aircraft_plants_tt
			}
		}
	}

	focus = {
		id = SOV_found_the_jet_institute

		icon = GFX_goal_generic_build_airforce
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		prerequisite = { focus = SOV_merge_aircraft_plants }
		x = -1	
		y = 1
		relative_position_id = SOV_merge_aircraft_plants
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_found_the_jet_institute
				bonus = 1.0
				uses = 1
				technology = jet_engines
			}
		}
	}

	focus = {
		id = SOV_increase_aircraft_production

		icon = GFX_focus_generic_aircraft_production
		prerequisite = { focus = SOV_expand_aviation_institutes }
		x = 0
		y = 2
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 10

		mutually_exclusive = { focus = SOV_intensify_pilot_training_program }

		available = {
			has_completed_focus = SOV_an_adaptable_army
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				#This handles the equipment bonus that's not supported by dynamic modifiers
				add_ideas = SOV_increased_aircraft_production_ns_bonus
				remove_dynamic_modifier = { modifier = SOV_soviet_airforce_dynamic_modifier }
				add_dynamic_modifier = { modifier = SOV_soviet_airforce_aircraft_production_focus_dynamic_modifier }
			}
			
			custom_effect_tooltip = SOV_increase_aircraft_production_ns_tt
		}
	}

	focus = {
		id = SOV_foster_flying_clubs

		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = SOV_transpolar_flights }
		x = 1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 5

		available = {
			has_completed_focus = SOV_desperate_measures
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_accidents_factor = -0.25
				tooltip = air_accidents_factor_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_weather_penalty = -0.1
				tooltip = air_weather_penalty_tt
			}
		}
	}

	focus = {
		id = SOV_women_in_aviation

		icon = GFX_focus_SOV_women_in_aviation
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_foster_flying_clubs
		cost = 5
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_weather_penalty = -0.1
				tooltip = air_weather_penalty_tt
			}
		}
	}

	focus = {
		id = SOV_raskovas_aviation_group

		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_women_in_aviation }
		x = 1
		y = 1
		relative_position_id = SOV_women_in_aviation
		cost = 5
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_night_penalty = -0.2
				tooltip = air_night_penalty_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_intensify_pilot_training_program

		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = SOV_expand_aviation_institutes }
		x = 0
		y = 2
		relative_position_id = SOV_foster_flying_clubs
		cost = 10

		mutually_exclusive = { focus = SOV_increase_aircraft_production }

		available = {
			has_completed_focus = SOV_an_adaptable_army
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_accidents_factor = -0.25
				tooltip = air_accidents_factor_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_night_penalty = -0.1
				tooltip = air_night_penalty_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_weather_penalty = -0.1
				tooltip = air_weather_penalty_tt
			}
		}
	}

	focus = {
		id = SOV_expand_aviation_institutes

		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_expand_the_aircraft_industry focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		available = {
			has_completed_focus = SOV_the_sacred_war
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_accidents_factor = -0.25
				tooltip = air_accidents_factor_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_weather_penalty = -0.1
				tooltip = air_weather_penalty_tt
			}
		}
	}

	focus = {
		id = SOV_ground_support

		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_increase_aircraft_production
		cost = 10

		mutually_exclusive = { focus = SOV_long_range_aircraft }

		available = {
			has_completed_focus = SOV_lessons_of_war
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {		
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_cas_present_factor = 0.1
				tooltip = air_cas_present_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
				name = SOV_ground_support
				bonus = 1
				uses = 1
				technology = tank_buster_2
			}
		}
	}

	focus = {
		id = SOV_long_range_aircraft

		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_intensify_pilot_training_program
		cost = 10

		mutually_exclusive = { focus = SOV_ground_support }
		
		available = {
			has_completed_focus = SOV_lessons_of_war
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_superiority_efficiency = 0.05
				tooltip = air_superiority_efficiency_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
				name = SOV_long_range_aircraft
				bonus = 1
				uses = 2
				technology = advanced_small_airframe
				technology = engines_4
			}
		}
	}

	focus = {
		id = SOV_the_modern_war_in_the_skies

		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_ground_support focus = SOV_long_range_aircraft }
		x = 1
		y = 1
		relative_position_id = SOV_ground_support
		cost = 10

		available = {
			has_completed_focus = SOV_the_glory_of_the_red_army
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_airforce_modifier_tt
			add_to_variable = { 
			    SOV_soviet_airforce_air_superiority_efficiency = 0.075
				tooltip = air_superiority_efficiency_tt
			}
			add_to_variable = { 
			    SOV_soviet_airforce_air_night_penalty = -0.1
				tooltip = air_night_penalty_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

##     ## #### ##       #### ########    ###    ########  ##    ## 
###   ###  ##  ##        ##     ##      ## ##   ##     ##  ##  ##  
#### ####  ##  ##        ##     ##     ##   ##  ##     ##   ####   
## ### ##  ##  ##        ##     ##    ##     ## ########     ##    
##     ##  ##  ##        ##     ##    ######### ##   ##      ##    
##     ##  ##  ##        ##     ##    ##     ## ##    ##     ##    
##     ## #### ######## ####    ##    ##     ## ##     ##    ##    



	focus = {
		id = SOV_found_the_pcdi

		icon = GFX_goal_generic_defence
		x = 12
		y = 0
		relative_position_id = SOV_transpolar_flights
		cost = 5
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_production_factory_max_efficiency_factor = 0.05
				tooltip = production_factory_max_efficiency_factor_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_production_factory_efficiency_gain_factor = -0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_line_change_production_efficiency_factor = -0.1
				tooltip = line_change_production_efficiency_factor_tt
			}
		}
	}

	focus = {
		id = SOV_pc_of_mechanical_engineering

		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_found_the_pcdi }
		x = -5
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_production_factory_max_efficiency_factor = 0.05
				tooltip = production_factory_max_efficiency_factor_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_production_factory_efficiency_gain_factor = -0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_tech_bonus = {
				name = SOV_pc_of_mechanical_engineering_name_default
				bonus = 1
				uses = 3
				technology = improved_infantry_weapons_2
				technology = advanced_infantry_weapons
				technology = mechanised_infantry
			}
		}
	}

	focus = {
		id = SOV_superior_war_machines

		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = -1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 10

		available = {
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				has_tech = improved_medium_tank_chassis
			}
			else = {
				has_tech = improved_medium_tank
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			set_variable = { 
			    SOV_fyp_tank_manufacturer_cost_factor = -0.1
				tooltip = tank_manufacturer_cost_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt

			add_tech_bonus = {
				name = SOV_superior_war_machines
				bonus = 1
				uses = 1
				technology = advanced_medium_tank_chassis
				technology = advanced_heavy_tank_chassis
			}
			add_tech_bonus = {
				name = SOV_superior_war_machines
				bonus = 1
				uses = 1
				technology = armor_tech_4
			}
		}
	}

	focus = {
		id = SOV_the_means_to_wage_war

		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			set_variable = { 
			    SOV_fyp_materiel_manufacturer_cost_factor = -0.25
				tooltip = materiel_manufacturer_cost_factor_tt
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			add_tech_bonus = {
				name = SOV_the_means_to_wage_war
			    bonus = 1
			    uses = 2
				technology = tech_engineers4
				technology = tech_flamethrower_brigade4
			}
		}
	}

	focus = {
		id = SOV_soviet_artillery

		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = SOV_superior_war_machines }
		x = -1
		y = 1
		relative_position_id = SOV_superior_war_machines
		cost = 10

		available = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_soviet_artillery_tech_bonus_name_default
				bonus = 0.75
				uses = 2
				ahead_reduction = 2
				technology = antitank4
				technology = antitank5
			}
		}
	}

	focus = {
		id = SOV_pc_of_mortar_armament

		icon = GFX_goal_generic_occupy_start_war
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 0
		y = 2
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 5

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = { #DEFAULT COMMIE
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_mortar_armament_name_default
					bonus = 0.75
					uses = 2
					technology = antiair4
					technology = antiair5
				}
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt

			219 = {
				if = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_development_of_tankograd

		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = SOV_the_means_to_wage_war }
		x = 1
		y = 1
		relative_position_id = SOV_the_means_to_wage_war
		cost = 5

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			set_variable = { 
			    SOV_fyp_land_equipment_upgrade_xp_cost = -0.1
				tooltip = land_equipment_upgrade_xp_cost_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt

			custom_effect_tooltip = SOV_development_of_tankograd_factories_tt
			#This is just for tooltip purposes
			effect_tooltip = {
				every_owned_state = {
					limit = {
						is_on_continent = asia
						arms_factory > 2
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			#Actual effects
			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 10 compare = less_than }
				}
				hidden_effect = {
					random_owned_state = {
						limit = {
							is_on_continent = asia
							arms_factory > 2
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_development_of_tankograd_flag }
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
						set_state_flag = SOV_development_of_tankograd_flag
						add_to_temp_variable = { SOV.temp_targets_index = 1 }
						#log = "Round [?SOV.temp_targets_index]"
					}
				}
			}
		}
	}

	focus = {
		id = SOV_merge_tank_and_materiel_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_development_of_tankograd focus = SOV_pc_of_mortar_armament focus = SOV_soviet_artillery }

		x = 0
		y = 1
		relative_position_id = SOV_pc_of_mortar_armament
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				#TANKS
				every_military_industrial_organization = {
					limit = {
						has_mio_trait = SOV_mio_trait_merge_plant_no_174 #All Tank MIOs have this trait
					}
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_174
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_112
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_ural_heavy_machine_building_plant
				}

				#MATERIEL
				every_military_industrial_organization = {
					limit = {
						has_mio_trait = SOV_mio_trait_merge_nkmz_plant #All Materiel MIOs have this trait
					}
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_nkmz_plant
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_magnitogorsk_metallurgical_plant
				}
				mio:SOV_grabin_design_bureau_organization = {
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_172
				}
				mio:SOV_tula_arms_plant_organization = {
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_plant_no_622
				}
				mio:SOV_gaz_organization = {
					unlock_mio_trait_tooltip = SOV_mio_trait_merge_automobile_tool_plant
				}
			}
			else = {
				custom_effect_tooltip = SOV_merge_tank_and_materiel_plants_tt
			}
		}
	}

	focus = {
		id = SOV_strengthen_the_mobilization_plan
		icon = GFX_focus_SOV_mobilization_plan
		x = 7
		y = 0
		relative_position_id = SOV_found_the_pcdi
		cost = 5
		
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }

		ai_will_do = {
			factor = 1
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
            army_experience = 150
			navy_experience = 150
		}
	}

	focus = {
		id = SOV_military_engineering_university
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_found_the_pcdi }
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 2
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = SOV_modify_fyp_modifier_tt
			add_to_variable = { 
			    SOV_fyp_production_speed_bunker_factor = 0.05
				tooltip = production_speed_bunker_factor_tt
			}
			
			add_to_variable = { 
			    SOV_fyp_production_speed_coastal_bunker_factor = 0.05
				tooltip = production_speed_coastal_bunker_factor_tt
			}
		}
	}

	focus = {
		id = SOV_leningrad_polytechnical_institute
		icon = GFX_focus_research
		prerequisite = { focus = SOV_the_means_to_wage_war }
		prerequisite = { focus = SOV_military_engineering_university }
		x = 2
		y = 2
		relative_position_id = SOV_the_means_to_wage_war
		cost = 10
		dynamic = yes 
		available = {

		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_soviet_atomic_bomb_project
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = SOV_leningrad_polytechnical_institute }
		x = 0
		y = 2
		relative_position_id = SOV_leningrad_polytechnical_institute
		cost = 10

		available = {
			date > 1943.1.1
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_soviet_atomic_bomb_project_tech_bonus_name
				bonus = 1
				uses = 1
				ahead_reduction = 1
				category = nuclear
			}
		}
	}

	focus = {
		id = SOV_southern_frontier
		icon = GFX_SOV_the_southern_thrust_ccp_2d_sov_compatibility
		prerequisite = { focus = SOV_military_engineering_university }
		x = -3
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 2
		
		available = {
			OR = {
				controls_state = 218
				controls_state = 228
				controls_state = 227
				controls_state = 221
			}
		}
		
		bypass = {
			NOT = {
				controls_state = 218
				controls_state = 228
				controls_state = 227
				controls_state = 221
			}
		}

		completion_reward = {
			custom_effect_tooltip = SOV_southern_frontier_tt
			hidden_effect = {
				218 = {
					if = {
						limit = {
							ROOT = { controls_province = 9417 }
							any_province_building_level = {
								province = {
									id = 9417
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 9417
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13432 }
							any_province_building_level = {
								province = {
									id = 13432
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13432
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13431 }
							any_province_building_level = {
								province = {
									id = 13431
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13431
							instant_build = yes
						}
					}
				}	

				228 = {
					if = {
						limit = {
							ROOT = { controls_province = 13433 }
							any_province_building_level = {
								province = {
									id = 13433
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13433
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 9461 }
							any_province_building_level = {
								province = {
									id = 9461
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 9461
							instant_build = yes
						}
					}
				}	

				227 = {
					if = {
						limit = {
							ROOT = { controls_province = 6474 }
							any_province_building_level = {
								province = {
									id = 6474
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 6474
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13538 }
							any_province_building_level = {
								province = {
									id = 13538
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13538
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13539 }
							any_province_building_level = {
								province = {
									id = 13539
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13539
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13540 }
							any_province_building_level = {
								province = {
									id = 13540
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13540
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 6420 }
							any_province_building_level = {
								province = {
									id = 6420
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 6420
							instant_build = yes
						}
					}
				}				

				221 = {
					if = {
						limit = {
							ROOT = { controls_province = 418 }
							any_province_building_level = {
								province = {
									id = 418
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 418
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13541 }
							any_province_building_level = {
								province = {
									id = 13541
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13541
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 13429 }
							any_province_building_level = {
								province = {
									id = 13429
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							province = 13429
							instant_build = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_road_of_life
		icon = GFX_focus_SOV_the_road_of_life
		prerequisite = { focus = SOV_leningrad_polytechnical_institute }
		prerequisite = { focus = SOV_southern_frontier }
		x = 1
		y = 1
		relative_position_id = SOV_leningrad_polytechnical_institute
		cost = 5

		available = {
			has_war = yes
		}
		
		search_filters = {}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_the_road_of_life_ns
				days = 730
			}
		}
	}

	focus = {
		id = SOV_the_molotov_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_military_engineering_university }
		x = -1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 5

		mutually_exclusive = { focus = SOV_improve_the_stalin_line }

		available = {
			OR = {
				controls_state = 91
				controls_state = 94
				controls_state = 11
				controls_state = 97
			}
		}
		
		bypass = {
			NOT = {
				controls_state = 91
				controls_state = 94
				controls_state = 11
				controls_state = 97
			}
		}
		
		search_filters = {}

		completion_reward = {
			11 = {
				if = {
					limit = {
						ROOT = { controls_province = 6296 }
						any_province_building_level = {
							province = {
								id = 6296
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 10
						province = 6296
						instant_build = yes
					}
				}
			}
			
			97 = {
				if = {
					limit = {
						ROOT = { controls_province = 11301 }
						any_province_building_level = {
							province = {
								id = 11301
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 10
						province = 11301
						instant_build = yes
					}
				}
			}
			
			94 = {
				if = {
					limit = {
						ROOT = { controls_province = 3392 }
						any_province_building_level = {
							province = {
								id = 3392
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 10
						province = 3392
						instant_build = yes
					}
				}
			}
			
			91 = {
				if = {
					limit = {
						ROOT = { controls_province = 11479 }
						any_province_building_level = {
							province = {
								id = 11479
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 10
						province = 11479
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_improve_the_stalin_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_military_engineering_university }
		x = 1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 5

		mutually_exclusive = { focus = SOV_the_molotov_line }

		available = {
			OR = {
				controls_state = 209
				controls_state = 210
				controls_state = 207
				controls_state = 206
				controls_state = 202
				controls_state = 203
				controls_state = 834
				controls_state = 192
				controls_state = 224
				controls_state = 207
				controls_state = 242
			}
		}
		
		bypass = {
			NOT = {
				controls_state = 209
				controls_state = 210
				controls_state = 207
				controls_state = 206
				controls_state = 202
				controls_state = 203
				controls_state = 834
				controls_state = 192
				controls_state = 224
				controls_state = 207
				controls_state = 242
			}
		}

		completion_reward = {
			202 = {
				if = {
					limit = {
						ROOT = { controls_province = 525 }
						any_province_building_level = {
							province = {
								id = 525
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 8
						province = 525
						instant_build = yes
					}
				}
				
				if = {
					limit = {
						ROOT = { controls_province = 13425 }
						any_province_building_level = {
							province = {
								id = 13425
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 8
						province = 13425
						instant_build = yes
					}
				}
			}
			
			192 = {
				if = {
					limit = {
						ROOT = { controls_province = 11670 }
						any_province_building_level = {
							province = {
								id = 11670
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 8
						province = 11670
						instant_build = yes
					}
				}
				
				if = {
					limit = {
						ROOT = { controls_province = 13428 }
						any_province_building_level = {
							province = {
								id = 13428
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 8
						province = 13428
						instant_build = yes
					}
				}
			}
			
			226 = {
				if = {
					limit = {
						ROOT = { controls_province = 11437 }
						any_province_building_level = {
							province = {
								id = 11437
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 11437
						instant_build = yes
					}
				}
				
				if = {
					limit = {
						ROOT = { controls_province = 11561 }
						any_province_building_level = {
							province = {
								id = 11561
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 11561
						instant_build = yes
					}
				}
			}
			
			194 = {
				if = {
					limit = {
						ROOT = { controls_province = 6232 }
						any_province_building_level = {
							province = {
								id = 6232
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 6232
						instant_build = yes
					}
				}
			}

			206 = { 
				if = {
					limit = {
						ROOT = { controls_province = 11370 }
						any_province_building_level = {
							province = {
								id = 11370
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 8
						province = 11370
						instant_build = yes
					}
				}
			}
			
			207 = {
				if = {
					limit = {
						ROOT = { controls_province = 11241 }
						any_province_building_level = {
							province = {
								id = 11241
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 11241
						instant_build = yes
					}
				}
			}
			
			242 = {
				if = {
					limit = {
						ROOT = { controls_province = 306 }
						any_province_building_level = {
							province = {
								id = 306
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 306
						instant_build = yes
					}
				}
			}
			
			224 = {
				if = {
					limit = {
						ROOT = { controls_province = 9288 }
						any_province_building_level = {
							province = {
								id = 9288
							}
							building = bunker
							level < 1
						}
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 9288
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_defense_of_moscow
		icon = GFX_focus_SOV_the_defense_of_moscow
		prerequisite = { focus = SOV_southern_frontier focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = 1
		y = 1
		relative_position_id = SOV_southern_frontier
		cost = 2

		available = {
			OR = {
				controls_state = 219
				controls_state = 246
				controls_state = 247
			}
			has_war_with = GER
		}
		
		bypass = {
			NOT = {
				controls_state = 219
				controls_state = 246
				controls_state = 247
			}
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				
				hidden_effect = {
					219 = {
						if = {
							limit = {
								ROOT = { controls_province = 6380 }
								any_province_building_level = {
									province = {
										id = 6380
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 6380
								instant_build = yes
							}
						}
						
						if = {
							limit = {
								ROOT = { controls_province = 13421 }
								any_province_building_level = {
									province = {
										id = 13421
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 13421
								instant_build = yes
							}
						}
						
						if = {
							limit = {
								ROOT = { controls_province = 13422 }
								any_province_building_level = {
									province = {
										id = 13422
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 13422
								instant_build = yes
							}
						}
						
						if = {
							limit = {
								ROOT = { controls_province = 13420 }
								any_province_building_level = {
									province = {
										id = 13420
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 13420
								instant_build = yes
							}
						}
						
						if = {
							limit = {
								ROOT = { controls_province = 13424 }
								any_province_building_level = {
									province = {
										id = 13424
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 13424
								instant_build = yes
							}
						}
						
						if = {
							limit = {
								ROOT = { controls_province = 13423 }
								any_province_building_level = {
									province = {
										id = 13423
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 10
								province = 13423
								instant_build = yes
							}
						}
					}
					
					246 = {
						if = {
							limit = {
								ROOT = { controls_province = 11349 }
								any_province_building_level = {
									province = {
										id = 11349
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 8
								province = 11349
								instant_build = yes
							}
						}
					}
					
					223 = {
						if = {
							limit = {
								ROOT = { controls_province = 6262 }
								any_province_building_level = {
									province = {
										id = 6262
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 8
								province = 6262
								instant_build = yes
							}
						}
					}
					
					247 = {
						if = {
							limit = {
								ROOT = { controls_province = 6245 }
								any_province_building_level = {
									province = {
										id = 6245
									}
									building = bunker
									level < 1
								}
							}
							add_building_construction = {
								type = bunker
								level = 8
								province = 6245
								instant_build = yes
							}
						}
					}
				}
				add_dynamic_modifier = { modifier = SOV_defend_moscow scope = SOV }
			}
		}
	}

	focus = {
		id = SOV_impregnable_forts
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = -1
		y = 1
		relative_position_id = SOV_improve_the_stalin_line
		cost = 1

		available = {
			OR = {
				controls_state = 195
				controls_state = 208
				controls_state = 137
			}
			OR = {
			    has_war_with = GER
				FIN = { is_ai = no }
			}
		}
		
		bypass = {
			AND = {
				NOT = {
					controls_state = 195
					controls_state = 208
					controls_state = 137
				}
			}
		}
		
		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					controls_state = 195
				}
				195 = { #LENINGRAD
					custom_effect_tooltip = SOV_defense_of_leningrad_forts
					hidden_effect = {
						195 = {
							if = {
								limit = {
									ROOT = { controls_province = 13437 }
									any_province_building_level = {
										province = {
											id = 13437
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 13437
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 3151 }
									any_province_building_level = {
										province = {
											id = 3151
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 3151
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 149 }
									any_province_building_level = {
										province = {
											id = 149
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 149
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13439 }
									any_province_building_level = {
										province = {
											id = 13439
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 13439
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13438 }
									any_province_building_level = {
										province = {
											id = 13438
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 13438
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 3151 }
									any_province_building_level = {
										province = {
											id = 3151
										}
										building = coastal_bunker
										level < 1
									}
								}
								add_building_construction = {
									type = coastal_bunker
									level = 10
									province = 3151
									instant_build = yes
								}
							}
						}
						
						263 = {
							if = {
								limit = {
									ROOT = { controls_province = 117 }
									any_province_building_level = {
										province = {
											id = 117
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 8
									province = 117
									instant_build = yes
								}
							}
						}
					}
					add_dynamic_modifier = { modifier = SOV_krasnaya_gorka_battery scope = SOV }
				}
			}
			
			if = {
				limit = {
					controls_state = 208 #LUGA
				}
				208 = { #LUGA
					custom_effect_tooltip = SOV_defense_of_luga_forts
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11186
							instant_build = yes
						}
					}
					add_dynamic_modifier = { modifier = SOV_seraya_loshad_battery scope = SOV }
				}
			}

			if = {
				limit = {
					controls_state = 137 #CRIMEA
				}
				137 = { #CRIMEA
					custom_effect_tooltip = SOV_defense_of_crimea_forts
					
					hidden_effect = {
						137 = {
							if = {
								limit = {
									ROOT = { controls_province = 3686 }
									any_province_building_level = {
										province = {
											id = 3686
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 10
									province = 3686
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13430 }
									any_province_building_level = {
										province = {
											id = 13430
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 8
									province = 13430
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13440 }
									any_province_building_level = {
										province = {
											id = 13440
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 8
									province = 13440
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13535 }
									any_province_building_level = {
										province = {
											id = 13535
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 5
									province = 13535
									instant_build = yes
								}
							}
							
							if = {
								limit = {
									ROOT = { controls_province = 13536 }
									any_province_building_level = {
										province = {
											id = 13536
										}
										building = bunker
										level < 1
									}
								}
								add_building_construction = {
									type = bunker
									level = 5
									province = 13536
									instant_build = yes
								}
							}
						}
					}
					add_dynamic_modifier = { modifier = SOV_armored_battery_35 scope = SOV }
				}
			}
		}
	}
	
	focus = {
		id = SOV_stalingrad_defence
		icon = GFX_focus_CHL_departemento_de_las_tropas_nacistas_de_asalto
		prerequisite = { focus = SOV_the_defense_of_moscow }
		prerequisite = { focus = SOV_impregnable_forts }
		relative_position_id = SOV_the_molotov_line
		x = 0
		y = 2
		cost = 2
		
		available = {
			217 = {
				is_controlled_by = ROOT
			}
			
			has_war_with = GER
		}
		
		completion_reward = {
			217 = {
				custom_effect_tooltip = SOV_defense_of_stalingrad_forts
				
				hidden_effect = {
					add_building_construction = {
						type = anti_air_building
						level = 5
						instant_build = yes
					}				
					if = {
						limit = {
							ROOT = { controls_province = 13434 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 13434
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 13436 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 13436
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 3529 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 3529
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 13435 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 13435
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 3555 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 3555
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 520 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 520
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 498 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 498
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 11474 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 11474
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 11484 }
						}
						add_building_construction = {
							type = bunker
							level = 10
							province = 11484
							instant_build = yes
						}
					}
					
					# sound_effect = psi_katyusha
				}
				add_dynamic_modifier = { modifier = SOV_defend_stalingrad scope = SOV }
			}
		}
	}

	focus = {
		id = SOV_explosion_of_the_dhs
		icon = GFX_focus_generic_provoke_border_clashes
		
		prerequisite = { focus = SOV_military_engineering_university }
		x = 2
		y = 2
		
		relative_position_id = SOV_military_engineering_university
		cost = 1

		available = {
			controls_state = 226
			controls_state = 200
			has_war_with = GER
		}
		
		search_filters = {}

		completion_reward = {
			226 = { add_dynamic_modifier = { modifier = massive_flooding days = 210 } }
			200 = { add_dynamic_modifier = { modifier = massive_flooding days = 210 } }	
			
			hidden_effect = { news_event = origion.24 hours = 3 }
		}
	}

	focus = {
		id = SOV_kursk_salient_forts
		icon = GFX_focus_CHL_expand_the_forestry
		
		prerequisite = { focus = SOV_military_engineering_university }
		x = 3
		y = 1
		relative_position_id = SOV_military_engineering_university
		
		cost = 2

		available = {
			OR = {
				controls_state = 220
				controls_state = 222
				controls_state = 224
			}
		}
		
		bypass = {
			NOT = {
				controls_state = 220
				controls_state = 222
				controls_state = 224
			}
		}

		completion_reward = {
			custom_effect_tooltip = SOV_kursk_salient_forts_tt
			hidden_effect = {
				220 = {
					if = {
						limit = {
							ROOT = { controls_province = 3580 }
							any_province_building_level = {
								province = {
									id = 3580
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 3580
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 9260 }
							any_province_building_level = {
								province = {
									id = 9260
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9260
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 580 }
							any_province_building_level = {
								province = {
									id = 580
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 580
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 11526 }
							any_province_building_level = {
								province = {
									id = 11526
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 11526
							instant_build = yes
						}
					}
					
					if = {
						limit = {
							ROOT = { controls_province = 6543 }
							any_province_building_level = {
								province = {
									id = 6543
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 6543
							instant_build = yes
						}
					}
				}
				
				222 = {
					if = {
						limit = {
							ROOT = { controls_province = 9355 }
							any_province_building_level = {
								province = {
									id = 9355
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 9355
							instant_build = yes
						}
					}
				}
				
				224 = {
					if = {
						limit = {
							ROOT = { controls_province = 3335 }
							any_province_building_level = {
								province = {
									id = 3335
								}
								building = bunker
								level < 1
							}
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 3335
							instant_build = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_restore_cossack_units
		icon = GFX_focus_SOV_restore_cossack_units
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = -1
		y = 1
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		mutually_exclusive = { focus = SOV_cohesion_first }

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 25000
			}
			
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 1000
			}
		}
	}

	focus = {
		id = SOV_cohesion_first
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 1
		y = 1
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		mutually_exclusive = { focus = SOV_restore_cossack_units }

		available = {
		}
		
		search_filters = {}

		completion_reward = {		
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_org_factor = 0.05
				tooltip = army_org_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_training_time_factor = 0.1
				tooltip = training_time_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_rehabilitated_military
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = SOV_restore_cossack_units focus = SOV_cohesion_first }
		x = 0
		y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_land_reinforce_rate = 0.02
				tooltip = land_reinforce_rate_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_morale_factor = 0.1
				tooltip = army_morale_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_military_reorganization
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = SOV_rehabilitated_military }
		x = 0
		y = 2
		relative_position_id = SOV_rehabilitated_military
		cost = 10
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_org_factor = 0.05
				tooltip = army_org_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_org_loss_at_low_org_factor = -0.15
				tooltip = org_loss_at_low_org_factor_orgn_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}
    
	focus = {
        id = SOV_the_sacred_war
        icon = GFX_focus_SOV_builder_of_the_red_army
        prerequisite = { focus = SOV_desperate_measures }
        x = 3
        y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 10
    
	    completion_reward = {		
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_attack_factor = 0.05
				tooltip = army_attack_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_defence_factor = 0.05
				tooltip = army_defence_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_morale_factor = 0.1
				tooltip = army_morale_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_conscription_factor = 0.15
				tooltip = conscription_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
		    hidden_effect = {
			    sound_effect = psi_the_sacred_war
			}
			
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
		} 
    }

	focus = {
		id = SOV_desperate_measures
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 3
		y = 1
		cost = 5
        relative_position_id = SOV_strengthen_the_mobilization_plan
		
		available = {
			date > 1941.06.22
		}
		
		search_filters = {}
		select_effect = {
			hidden_effect = {
				soviet_starts_evacuation = yes
				add_ideas = SOV_desperate_measures_ns		
			}
		}
		
		completion_reward = {
			custom_effect_tooltip = SOV_focus_select_effect_tt
			custom_effect_tooltip = SOV_auto_complete_relocate_industry
			
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			add_ideas = over_economic_mobilisation
			
			hidden_effect = { set_sub_doctrine = peoples_war set_capital = { state = 251 } }
		}
	}

	focus = {
		id = SOV_an_adaptable_army
		icon = GFX_focus_generic_winter_warfare
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_the_sacred_war }
		x = 1
		y = 1
		relative_position_id = SOV_rehabilitated_military
		cost = 5

		available = {
			date > 1942.1.1
		}
		
		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_winter_attrition_factor = -0.35
				tooltip = winter_attrition_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_acclimatization_cold_climate_gain_factor = 0.5
				tooltip = acclimatization_cold_climate_gain_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
		}
	}

	focus = {
		id = SOV_lessons_of_war
		icon = GFX_focus_NOR_moscows_education_centers
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_the_sacred_war }
		x = 0
		y = 1
		relative_position_id = SOV_the_sacred_war
		cost = 5

		available = {
			date > 1942.5.1
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {	
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_attack_factor = 0.075
				tooltip = army_attack_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_defence_factor = 0.075
				tooltip = army_defence_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_org_factor = 0.05
				tooltip = army_org_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_experience_loss_factor = -0.25
				tooltip = experience_loss_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_breakthrough_factor = 0.075
				tooltip = breakthrough_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
		}
	}

	focus = {
		id = SOV_penal_battalions
		icon = GFX_focus_SOV_penal_battalions
		prerequisite = { focus = SOV_the_sacred_war }
		x = 2
		y = 1
		relative_position_id = SOV_the_sacred_war
		cost = 5

		available = {
			surrender_progress > 0.25
		}

		completion_reward = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 50000
			}
		}
	}

	focus = {
		id = SOV_smersh
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_lessons_of_war }
		x = 2
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_initiative_factor = 0.1
				tooltip = initiative_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_barrier_troops
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = SOV_smersh }
		x = 0
		y = 1
		relative_position_id = SOV_smersh
		cost = 10

		available = {

		}
		
		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_morale_factor = 0.1
				tooltip = army_morale_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_experts_in_camouflage
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = SOV_military_reorganization }
		x = -1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 5

		available = {

		}
		
		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_dig_in_speed_factor = 0.05
				tooltip = dig_in_speed_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_max_dig_in = 5
				tooltip = max_dig_in_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_cas_damage_reduction = 0.05
				tooltip = cas_damage_reduction_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
		}
	}

	focus = {
		id = SOV_keep_commissars_organization
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 5

		mutually_exclusive = { focus = SOV_swap_to_political_advisors }

		available = {
			date > 1942.11.1
		}
		
		search_filters = {}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_org_factor = 0.05
				tooltip = army_org_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_morale_factor = -0.1
				tooltip = army_morale_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
		}
	}

	focus = {
		id = SOV_swap_to_political_advisors
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 3
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 5

		mutually_exclusive = { focus = SOV_keep_commissars_organization }
		
		available = {
			date > 1942.11.1
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
		    custom_effect_tooltip = SOV_modify_the_red_army_modifier_tt
			add_to_variable = { 
			    SOV_the_red_army_army_org_factor = -0.05
				tooltip = army_org_factor_tt
			}
			add_to_variable = { 
			    SOV_the_red_army_army_morale_factor = 0.1
				tooltip = army_morale_factor_tt
			}
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
		}
	}

	focus = {
		id = SOV_the_glory_of_the_red_army
		icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
		prerequisite = { focus = SOV_keep_commissars_organization focus = SOV_swap_to_political_advisors }
		x = 1
		y = 1
		relative_position_id = SOV_keep_commissars_organization
		cost = 5

		available = {
			date > 1943.5.1
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_mastery = { amount = 100 sub_doctrine = peoples_war }
			
			hidden_effect = { news_event = origion.33 hours = 1 }
		}
	}


########   #######  ##       #### ######## ####  ######     ###    ##       
##     ## ##     ## ##        ##     ##     ##  ##    ##   ## ##   ##       
##     ## ##     ## ##        ##     ##     ##  ##        ##   ##  ##       
########  ##     ## ##        ##     ##     ##  ##       ##     ## ##       
##        ##     ## ##        ##     ##     ##  ##       ######### ##       
##        ##     ## ##        ##     ##     ##  ##    ## ##     ## ##       
##         #######  ######## ####    ##    ####  ######  ##     ## ######## 



	focus = {
		id = SOV_the_path_of_marxism_leninism
		icon = GFX_focus_SOV_the_path_of_marxism_leninism
		x = 21
		y = 0
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_political_power = 50
		}
	}

	focus = {
		id = SOV_the_centre
		icon = GFX_focus_fra_loyalty_stalin
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = 8
		y = 0
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5
		
		available = { has_completed_focus = SOV_the_new_soviet_woman }
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			hidden_effect = {
				add_dynamic_modifier = { modifier = SOV_the_politburo_good_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_the_centre_ns_tt

			add_political_power = 25
			add_stability = 0.05

			mark_focus_tree_layout_dirty = yes
		}
	}

	focus = {
		id = SOV_socialism_in_one_country
		icon = GFX_focus_SOV_socialism_in_one_country
		prerequisite = { focus = SOV_the_centre }
		x = -1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_communism_drift = 0.05 }
			add_to_variable = { SOV_the_politburo_defensive_war_stability_factor = 0.25 } 
			custom_effect_tooltip = SOV_socialism_in_one_country_ns_tt

			add_political_power = 25
		}
	}

	focus = {
		id = SOV_the_stalin_constitution
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_the_centre }
		x = 1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			custom_effect_tooltip = SOV_the_stalin_constitution_ns_tt

			add_political_power = 50
			add_stability = 0.05
		}
	}

	focus = {
		id = SOV_the_zinovyevite_terrorist_center
		icon = GFX_focus_SOV_purge_zinovyevists
		prerequisite = { focus = SOV_the_stalin_constitution }
		x = 0
		y = 1
		relative_position_id = SOV_the_stalin_constitution
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			set_country_flag = SOV_first_moscow_trial_flag
			
			if = {
				limit = {
					has_idea = SOV_genrikh_yagoda
				}
				hidden_effect = {
					SOV_genrikh_yagoda = {
						SOV_purge_character_effect = yes
					}
				}

				custom_effect_tooltip = SOV_characters_will_be_purged_tt
				character_list_tooltip = {
					limit = {
						is_character = SOV_genrikh_yagoda
					}
				}

				activate_advisor = SOV_nikolay_yezhov
			}
		}
	}

	focus = {
		id = SOV_secure_the_administration
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = -1
		y = 1
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_economy_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_trade_laws_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_mobilization_laws_cost_factor = -0.2 }
			custom_effect_tooltip = SOV_secure_the_administration_ns_tt

			add_political_power = 50
		}
	}

	focus = {
		id = SOV_the_collectivization_process
		icon = GFX_focus_generic_workers_and_farmers_rise
		prerequisite = { focus = SOV_socialism_in_one_country }
		prerequisite = { focus = SOV_secure_the_administration }
		x = 0
		y = 3
		relative_position_id = SOV_socialism_in_one_country
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_fyp_production_speed_buildings_factor = 0.1 }
			add_to_variable = { SOV_fyp_global_building_slots_factor = 0.1 }
			add_to_variable = { SOV_fyp_consumer_goods_expected_value = -0.03 }

			custom_effect_tooltip = SOV_the_collectivization_process_ns_tt
		}
	}

	focus = {
		id = SOV_the_anti_soviet_trotskyist_center
		icon = GFX_focus_SOV_purge_trotskyists
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = 0
		y = 2
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_first_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_tt
				has_country_flag = {
					flag = SOV_first_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			set_country_flag = SOV_second_moscow_trial_flag
			swap_ideas = {
				remove_idea = trotskyite_plot_nsb
				add_idea = trotskyite_plot_fmp
			}
		}
	}

	focus = {
		id = SOV_the_workers_dictatorship
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = SOV_the_anti_soviet_trotskyist_center }
		x = 0
		y = 1
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			custom_effect_tooltip = SOV_the_workers_dictatorship_ns_tt

			add_political_power = 50
		}
	}

	focus = {
		id = SOV_the_military_conspiracy
		icon = GFX_focus_SOV_military_purge
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = 0
		y = 2
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_second_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_military_tt
				has_country_flag = {
					flag = SOV_second_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			set_country_flag = SOV_trial_of_the_generals_flag
			add_political_power = 25

		}
	}

	focus = {
		id = SOV_the_bloc_of_rights_and_trotskyites
		icon = GFX_focus_SOV_purge_bukharinists
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 0
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_trial_of_the_generals_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_rights_tt
				has_country_flag = {
					flag = SOV_trial_of_the_generals_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
			
		completion_reward = {
			hidden_effect = {
				SOV_nikolay_yezhov = {
					SOV_purge_character_effect = yes
				}
			}
			
			custom_effect_tooltip = SOV_characters_will_be_purged_tt
			character_list_tooltip = {
				limit = {
					is_character = SOV_nikolay_yezhov
				}
			}
			activate_advisor = SOV_lavrenty_beriya
		}
	}

	focus = {
		id = SOV_behead_the_snake
		icon = GFX_focus_SOV_behead_the_snake
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 2
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 2
		
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			remove_ideas = trotskyite_plot_fmp
		}
	}

	focus = {
		id = SOV_they_will_know_fear
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = SOV_lessons_of_war }
		x = -1
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 5
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_they_will_know_fear
				bonus = 1
				uses = 1
				technology = main_battle_tank_chassis
			}
		}
	}
	
######################################################################################################################################

#### ##    ## ######## ######## ########  ##    ##    ###    ##             ###    ######## ########    ###    #### ########   ######  
 ##  ###   ##    ##    ##       ##     ## ###   ##   ## ##   ##            ## ##   ##       ##         ## ##    ##  ##     ## ##    ## 
 ##  ####  ##    ##    ##       ##     ## ####  ##  ##   ##  ##           ##   ##  ##       ##        ##   ##   ##  ##     ## ##       
 ##  ## ## ##    ##    ######   ########  ## ## ## ##     ## ##          ##     ## ######   ######   ##     ##  ##  ########   ######  
 ##  ##  ####    ##    ##       ##   ##   ##  #### ######### ##          ######### ##       ##       #########  ##  ##   ##         ## 
 ##  ##   ###    ##    ##       ##    ##  ##   ### ##     ## ##          ##     ## ##       ##       ##     ##  ##  ##    ##  ##    ## 
#### ##    ##    ##    ######## ##     ## ##    ## ##     ## ########    ##     ## ##       ##       ##     ## #### ##     ##  ######  
	


	focus = {
		id = SOV_addressing_internal_affairs
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		relative_position_id = SOV_the_centre
		x = 5
		y = 0
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_nkvd_primacy
		icon = GFX_goal_generic_military_deal
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = -2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 2
		
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_ideas = SOV_nkvd_nsb
		}
	}

	focus = {
		id = SOV_the_new_soviet_woman
		icon = GFX_goal_support_communism
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 100
			add_stability = 0.1
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
		}
	}

	focus = {
		id = SOV_expand_the_agitprop
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 0
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			hidden_effect = {
				SOV_unlock_propaganda_campaign_slot_effect = yes
			}
			unlock_decision_category_tooltip = SOV_propaganda_campaigns
		}
	}

	focus = {
		id = SOV_positive_heroism
		icon = GFX_goal_generic_cavalry
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = -2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 10

		mutually_exclusive = { focus = SOV_collectivist_propaganda }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = konstantin_rokossovsky 

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_heroes_forward
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_revive_the_stakhanovite_movement
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_positive_heroism }
		x = 0
		y = 1
		relative_position_id = SOV_positive_heroism
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SOV_stakhanovite_movement
		}
	}

	focus = {
		id = SOV_war_heroes
		icon = GFX_goal_generic_war_with_comintern
		prerequisite = { focus = SOV_revive_the_stakhanovite_movement }
		x = 0
		y = 1
		relative_position_id = SOV_revive_the_stakhanovite_movement
		cost = 10

		available = {

		}
		
		search_filters = {}

		completion_reward = {
			add_ideas = SOV_war_heroes_ns

		}
	}

	focus = {
		id = SOV_collectivist_propaganda
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 0
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 10

		mutually_exclusive = { focus = SOV_positive_heroism }

		available = {

		}
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_collectivist_propaganda_ns

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_for_the_motherland
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_socialist_emulation
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_collectivist_propaganda }
		x = 0
		y = 1
		relative_position_id = SOV_collectivist_propaganda
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = SOV_socialist_emulation_1_ns
		}
	}

	focus = {
		id = SOV_socialist_realism
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_socialist_emulation }
		x = 0
		y = 1
		relative_position_id = SOV_socialist_emulation
		cost = 10

		available = {

		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			swap_ideas = {
				remove_idea = SOV_socialist_emulation_1_ns
				add_idea = SOV_socialist_emulation_2_ns
			}
		}
	}

	focus = {
		id = SOV_the_komsomol
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_knowledge
			unlock_decision_tooltip = SOV_propaganda_builders_of_communism
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_patriarch_of_all_russia
		icon = GFX_focus_SOV_patriarch_of_all_russia
		prerequisite = { focus = SOV_war_heroes focus = SOV_socialist_realism }
		x = 1
		y = 1
		relative_position_id = SOV_war_heroes
		cost = 5

		available = {

		}
		
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_approach_germany
		icon = GFX_focus_chi_mission_to_germany
		prerequisite = { focus = SOV_the_collectivization_process }
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = 0
		y = 2
		relative_position_id = SOV_the_collectivization_process
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_war_with = GER }
		}
		
		search_filters = {}

		completion_reward = {
			SOV = { add_timed_idea = { idea = SOV_soviet_german_trade_agreement days = 545 } }
			
			hidden_effect = {
				GER = {
					add_timed_idea = { idea = SOV_soviet_german_trade_agreement days = 545 } #Technically 1 year but really 18 months for Soviet payment 
				}
			}
		}
	}
	
	focus = {
		id = SOV_secret_protocol_of_the_MR_pact
		icon = GFX_focus_SOV_the_supreme_soviet
		prerequisite = {  focus = SOV_the_military_conspiracy }
		x = 0
		y = 1
		relative_position_id = SOV_approach_germany
		cost = 4

		ai_will_do = {
			factor = 20	
		}
		
		available = {
			date > 1939.08.24
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }

		completion_reward = {
			add_political_power = -165
			
			custom_effect_tooltip = SOV_secret_protocol_of_the_MR_pact_tt
			
			hidden_effect = {
				annex_country = { target = EST }
				annex_country = { target = LAT }
				annex_country = { target = LIT }

				transfer_state = 766
				transfer_state = 78
				transfer_state = 80
				
				if = { limit = { FIN = { is_ai = no } } 
					transfer_state = 146
					transfer_state = 147
					transfer_state = 722
				}
			
				add_named_threat = { threat = 12 name = SOV_secret_protocol_of_the_MR_pact }
				
				add_timed_idea = {
					idea = SOV_hit_of_hammer_like_idea
					days = 180
				}
				
				add_timed_idea = {
					idea = wartime_bonds_like_idea
					days = 180
				}
			}
		}
	}
}
